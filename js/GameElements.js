var element_count = 0;

function Nation(myName){
  this.name = myName;

  switch (myName){
    case "us":
      this.alliance = 'allies';
      break;
    case "ru":
      this.alliance = 'soviets';
      break;
    case "uk":
      this.alliance = 'allies';
      break;
    case "fr":
      this.alliance = 'allies';
      break;
    case "de":
      this.alliance = 'axis';
      break;
    case "it":
      this.alliance = 'axis';
      break;
  }
}
Nation.prototype.constructor = Nation;

function Game(){
  //possible nations
  this.ALL_NATIONS = ['de', 'uk', 'ru', 'fr', 'us', 'it'];
  this.ACTIVE_NATIONS = new Array();
  //create nations
  for (var i = 0; i < this.ALL_NATIONS.length; i++){
    this.ACTIVE_NATIONS.push(new Nation(this.ALL_NATIONS[i]));
  }
  this.GAME_TURN = 0;
  this.CURRENT_NATION = this.ACTIVE_NATIONS[0];
  this.CURRENT_NATION_INDEX = 0;
  this.INACTIVE_NATIONS = new Array();
}


Game.prototype = {
  constructor: Game,
  getCurrentNation: function(){
      if (this.CURRENT_NATION == ''){
        this.CURRENT_NATION = this.ACTIVE_NATIONS[0];
        this.CURRENT_NATION_INDEX = 0;
      }
      return this.CURRENT_NATION;
  },
  nextNation: function(){
    if (this.CURRENT_NATION_INDEX == this.ACTIVE_NATIONS.length - 1){
      this.CURRENT_NATION_INDEX = 0;
    }
    else{
      this.CURRENT_NATION_INDEX++;
    }
    this.CURRENT_NATION = this.ACTIVE_NATIONS[this.CURRENT_NATION_INDEX];
    return this.CURRENT_NATION;
  },
  previousNation: function(){
    if (this.CURRENT_NATION_INDEX == 0){
      this.CURRENT_NATION_INDEX = this.ACTIVE_NATIONS.length - 1;
    }
    else{
      this.CURRENT_NATION_INDEX--;
    }
    this.CURRENT_NATION = this.ACTIVE_NATIONS[this.CURRENT_NATION_INDEX];
    return this.CURRENT_NATION;
  }

};

//Base level game element that encompasses all 'pieces' on the board
//includes chits, zones, units and dice
function GameElement(myPath, myPaper) {
  this.pathstring = myPath;
  this.paper = myPaper;
  this.el;
  this.id = 'ge' + element_count;
  element_count++;
}

GameElement.prototype = {
  constructor: GameElement,
  drawElement: function () {
                this.paper.path(this.pathstring).attr(
                                    {
                                        stroke: 'black',
                                        gradient: '90-#d3d3d3-#3f3f3f',
                                        'stroke-width': 2,
                                        'stroke-linejoin': 'round'
                                    }
                              );
                            }
};

/************************ UNITS **********************************************************************/

//unit types of elements
function Unit(myPath, myPaper, myOwner){
  this.unit_owner = myOwner;
  this.location_zone = '';
  GameElement.call(this, myPath, myPaper);
}
Unit.prototype = Object.create(GameElement.prototype);
Unit.prototype.constructor = Unit;

Unit.prototype.drawElement = function (){

  switch(this.unit_owner){
    case 'de':
      var country_gradient = '90-#d3d3d3-#3f3f3f';
    break;
    case 'uk':
      var country_gradient = '90-#A38967-#D6C5AE';
    break;
    case 'fr':
      var country_gradient = '90-#44CCD4-#088D9C';
    break;
    case 'it':
      var country_gradient = '90-#FFBF00-#BA8B00';
    break;
    case 'us':
      var country_gradient = '90-#386928-#3A911D';
    break;
    case 'ru':
      var country_gradient = '90-#4F3B0D-#8C6D41';
    break;
  }


  this.el = this.paper.path(this.pathstring).attr(
                                  {
                                      stroke: 'black',
                                      gradient: country_gradient,
                                      'stroke-width': 1,
                                      'stroke-linejoin': 'round'
                                  }
                            ).draggable.enable();

  this.el.data("Unit", this);

  //attach mouseup handler to the element when drawing
  this.el.mouseup(function(event) {
    event.preventDefault();
    unitMouseupHandler(this);
  });
  this.el.mousedown(function(event) {
    event.preventDefault();
    unitMousedownHandler(this);
  });
};

function Armor(myPath, myPaper, myOwner) {
  var ps;
  if (myPath === null){
    ps = 'M64.4,55.959696724813675C66.12,55.444696724813674,68.035,55.249696724813674,69.36,53.904696724813675C70.72,53.739696724813676,72.1,53.89469672481367,73.465,53.904696724813675C73.64,54.09469672481367,73.985,54.474696724813676,74.16,54.66469672481367C76.16499999999999,54.834696724813675,78.63,54.14469672481367,80.26,55.639696724813675C81.19,57.14969672481368,81.07,59.00969672481368,81.22,60.709696724813675C84.96,60.779696724813675,88.72,60.529696724813675,92.445,60.89969672481368C93.835,60.944696724813674,94.615,62.16469672481367,95.28,63.209696724813675C93.975,63.44969672481368,94.145,64.88469672481368,93.835,65.82969672481367C93.625,67.75969672481368,91.905,68.90469672481368,90.675,70.20969672481367C88.905,71.82469672481368,87.09,73.99969672481367,84.47,73.92969672481368C76.12,74.07469672481368,67.77,73.92969672481368,59.42,74.08969672481368C58.325,74.03969672481368,57.165,74.20969672481367,56.129999999999995,73.77969672481368C52.625,71.81469672481367,49.81,68.90469672481368,46.705,66.41469672481368C46.98,65.62469672481367,47.26,64.83469672481367,47.51,64.03469672481367C48.285,63.68969672481367,49.095,63.39969672481368,49.955,63.364696724813676C52.879999999999995,63.16469672481367,55.8,62.92469672481367,58.724999999999994,62.67469672481367C59.26,62.10969672481367,59.8,61.53969672481367,60.334999999999994,60.96469672481368C61.22,60.974696724813676,62.105000000000004,60.99469672481368,62.989999999999995,61.01969672481367C61.765,60.50969672481368,60.94,59.499696724813674,60.4,58.32469672481368C51.084999999999994,58.10969672481367,41.769999999999996,57.96469672481368,32.46,57.654696724813675C32.55,57.459696724813675,32.73,57.069696724813674,32.82,56.87969672481367C41.864999999999995,56.739696724813676,50.92,57.054696724813674,59.97,57.03469672481367C61.5,56.93969672481367,62.93,56.334696724813675,64.4,55.959696724813675C64.4,55.959696724813675,64.4,55.959696724813675,64.4,55.959696724813675z ';
    // " M 64.93 47.96 C 68.37 46.93 72.20 46.54 74.85 43.85 C 77.57 43.52 80.33 43.83 83.06 43.85 C 83.41 44.23 84.10 44.99 84.45 45.37 C 88.46 45.71 93.39 44.33 96.65 47.32 C 98.51 50.34 98.27 54.06 98.57 57.46 C 106.05 57.60 113.57 57.10 121.02 57.84 C 123.80 57.93 125.36 60.37 126.69 62.46 C 124.08 62.94 124.42 65.81 123.80 67.70 C 123.38 71.56 119.94 73.85 117.48 76.46 C 113.94 79.69 110.31 84.04 105.07 83.90 C 88.37 84.19 71.67 83.90 54.97 84.22 C 52.78 84.12 50.46 84.46 48.39 83.60 C 41.38 79.67 35.75 73.85 29.54 68.87 C 30.09 67.29 30.65 65.71 31.15 64.11 C 32.70 63.42 34.32 62.84 36.04 62.77 C 41.89 62.37 47.73 61.89 53.58 61.39 C 54.65 60.26 55.73 59.12 56.80 57.97 C 58.57 57.99 60.34 58.03 62.11 58.08 C 59.66 57.06 58.01 55.04 56.93 52.69 C 38.30 52.26 19.67 51.97 1.05 51.35 C 1.23 50.96 1.59 50.18 1.77 49.80 C 19.86 49.52 37.97 50.15 56.07 50.11 C 59.13 49.92 61.99 48.71 64.93 47.96 Z";
  }
  else{
    ps = myPath;
  }
  this.unit_type = 'Armor';

  Unit.call(this, ps, myPaper, myOwner);
}
Armor.prototype = Object.create(Unit.prototype);
Armor.prototype.constructor = Armor;

//fighter types of units
function Fighter(myPath, myPaper, myOwner){
  //provide a default element for fighters
  var ps;
  if (myPath === null){
    ps = 'M39.62303382717071,28.96066450171422C39.62303382717071,28.96066450171422,42.28103382717071,25.20116450171422,42.28103382717071,25.20116450171422C42.99953382717071,24.18566450171422,43.56053382717071,22.82366450171422,43.53403382717071,22.159164501714223C43.50703382717071,21.49416450171422,42.945533827170706,20.93416450171422,42.278533827170705,20.906164501714223C41.612033827170706,20.87916450171422,40.248533827170704,21.43966450171422,39.23303382717071,22.15816450171422C39.23303382717071,22.15816450171422,35.47303382717071,24.81716450171422,35.47303382717071,24.81716450171422C35.47303382717071,24.81716450171422,24.97503382717071,19.80216450171422,24.97503382717071,19.80216450171422C23.85303382717071,19.266164501714222,22.37703382717071,19.543664501714222,21.67903382717071,20.42366450171422C20.98103382717071,21.30366450171422,21.19553382717071,22.65516450171422,22.15803382717071,23.44366450171422C22.15803382717071,23.44366450171422,30.550033827170708,30.31766450171422,30.550033827170708,30.31766450171422C30.550033827170708,30.31766450171422,24.276033827170707,37.26866450171422,24.276033827170707,37.26866450171422C24.276033827170707,37.26866450171422,21.31653382717071,36.375164501714224,21.31653382717071,36.375164501714224C20.12603382717071,36.01466450171422,18.792533827170708,36.06966450171422,18.33953382717071,36.49616450171422C17.886033827170706,36.92316450171422,18.304533827170708,37.90066450171422,19.274033827170708,38.680164501714216C19.274033827170708,38.680164501714216,21.95953382717071,40.83916450171422,21.95953382717071,40.83916450171422C21.95953382717071,40.83916450171422,21.858533827170707,41.30866450171422,21.733033827170708,41.888164501714215C21.608033827170708,42.46716450171422,21.97503382717071,42.83316450171422,22.553533827170707,42.70516450171422C22.553533827170707,42.70516450171422,23.600533827170707,42.47266450171422,23.600533827170707,42.47266450171422C23.600533827170707,42.47266450171422,25.758033827170706,45.15716450171422,25.758033827170706,45.15716450171422C26.538033827170707,46.12666450171422,27.51603382717071,46.545664501714214,27.94303382717071,46.09316450171421C28.36953382717071,45.64066450171421,28.42453382717071,44.30866450171422,28.06403382717071,43.117664501714216C28.06403382717071,43.117664501714216,27.17003382717071,40.15716450171422,27.17003382717071,40.15716450171422C27.17003382717071,40.15716450171422,34.12003382717071,33.88316450171422,34.12003382717071,33.88316450171422C34.12003382717071,33.88316450171422,40.99503382717071,42.27566450171422,40.99503382717071,42.27566450171422C41.78303382717071,43.23816450171421,43.13503382717071,43.45266450171421,44.01503382717071,42.754164501714214C44.894533827170704,42.056164501714214,45.17303382717071,40.57966450171422,44.63653382717071,39.45716450171422C44.63653382717071,39.45716450171422,39.62303382717071,28.96066450171422,39.62303382717071,28.96066450171422C39.62303382717071,28.96066450171422,39.62303382717071,28.96066450171422,39.62303382717071,28.96066450171422z';
    //    "M47.713,25.019l5.316-7.519c1.437-2.031,2.559-4.755,2.506-6.084c-0.054-1.33-1.177-2.45-2.511-2.506 c-1.333-0.054-4.06,1.067-6.091,2.504l-7.52,5.318L18.417,6.702c-2.244-1.072-5.196-0.517-6.592,1.243 c-1.396,1.76-0.967,4.463,0.958,6.04l16.784,13.748L17.019,41.635l-5.919-1.787c-2.381-0.721-5.048-0.611-5.954,0.242 c-0.907,0.854-0.07,2.809,1.869,4.368l5.371,4.318c0,0-0.202,0.939-0.453,2.098c-0.25,1.158,0.484,1.89,1.641,1.634l2.094-0.465 l4.315,5.369c1.56,1.939,3.516,2.777,4.37,1.872c0.853-0.905,0.963-3.569,0.242-5.951l-1.788-5.921l13.9-12.548l13.75,16.785 c1.576,1.925,4.28,2.354,6.04,0.957c1.759-1.396,2.316-4.349,1.243-6.594L47.713,25.019z";
  }
  else{
    ps = myPath;
  }
  this.unit_type = 'Fighter';
  Unit.call(this, ps, myPaper, myOwner);
}
Fighter.prototype = Object.create(Unit.prototype)
Fighter.prototype.constructor = Fighter;

//fighter types of units
function Bomber(myPath, myPaper, myOwner){
  //provide a default element for fighters
  var ps;
  if (myPath === null){
    ps = "M 0,0 c 0,0 0.001,5.999 -7.333,6.333 l -51.334,5 c 0,0 3,11.667 -4.333,12.667 l -0.333,4.667 -3.667,0 0,-4.667 c 0,0 -6.666,1.666 -4.333,-12.667 l -12.334,1 c 0,0 4.001,45.667 -7.666,45 0,0 -9.668,3 -6.334,-45 l -13.333,-1 c 0,0 3,12.834 -3.5,13.084 l -0.25,4.25 -3.5,0.25 0.25,-4.5 c 0,0 -7,2 -4.75,-14 L -176,5.667 c 0,0 -5.084,-1.668 -4.667,-6.334 0,0 -1,-7.332 4.667,-8.666 l 54.273,-7.359 c 0.241,-1.128 2.414,-10.934 5.477,-11.641 0,0 4.397,5.336 5.167,10.197 l 13.75,-1.864 2,-38 -24.334,-5.333 -0.333,-9.334 5,-5.666 20.667,2 0.666,-8.667 1.334,0 0,-4 3,-0.333 0,4.333 2,0 -0.334,9 21.334,-1.333 5,5.333 -0.334,9 -25,5.333 1.667,37.334 15.662,2.145 4.588,-9.395 c 2.646,0.61 4.629,8.014 5.274,10.745 l 54.809,7.505 c 0,0 5,1.666 4.667,9.333";
  }
  else{
    ps = myPath;
  }
  this.unit_type = 'Bomber';
  Unit.call(this, ps, myPaper, myOwner);
}
Bomber.prototype = Object.create(Unit.prototype)
Bomber.prototype.constructor = Bomber;


//infantry types of units
function Infantry(myPath, myPaper, myOwner){
  //provide a default element for infantry
  var ps;
  if (myPath === null){
    ps = 'M-13.455033561085324,27.09712216914196C-13.924428561085325,27.10006216914196,-14.347828561085324,27.44957716914196,-14.779008561085323,28.17293716914196C-15.078483561085324,28.67534716914196,-16.016968561085324,29.750937169141963,-17.032483561085325,30.75400716914196C-17.990098561085325,31.69988716914196,-19.081328561085325,32.80613716914196,-19.453723561085326,33.21554716914196C-21.115403561085323,35.04239216914196,-22.605513561085324,36.51662216914196,-23.325898561085324,37.04067216914196C-24.462598561085322,37.86757716914196,-25.250568561085323,38.65138216914196,-25.538563561085326,39.245432169141964C-25.677648561085324,39.53232216914196,-25.917193561085323,39.92047716914196,-26.069063561085322,40.10431216914196C-26.069063561085322,40.10431216914196,-26.345643561085325,40.43635216914196,-26.345643561085325,40.43635216914196C-26.345643561085325,40.43635216914196,-26.649433561085324,39.93607716914196,-26.649433561085324,39.93607716914196C-26.816833561085325,39.65904216914196,-27.218223561085324,39.26831716914196,-27.54266356108532,39.06834216914196C-27.86709856108532,38.86836716914196,-28.13361856108532,38.656517169141964,-28.13663856108532,38.59905716914196C-28.13966356108532,38.54159716914196,-28.43347356108532,38.26930716914196,-28.78955856108532,37.99695216914196C-28.78955856108532,37.99695216914196,-29.43794356108532,37.50553216914196,-29.43794356108532,37.50553216914196C-29.43794356108532,37.50553216914196,-29.43794356108532,36.42529216914196,-29.43794356108532,36.42529216914196C-29.43794356108532,35.55170716914196,-29.38314856108532,35.28687216914196,-29.14775356108532,35.02186216914196C-28.95714856108532,34.80727216914196,-28.857568561085323,34.49467716914196,-28.857568561085323,34.10542716914196C-28.857568561085323,33.283537169141965,-29.593398561085323,32.40393216914196,-31.101978561085318,31.41367216914196C-32.51993356108532,30.482902169141962,-33.104123561085316,30.40840216914196,-34.55700856108532,30.993087169141962C-35.55723356108532,31.39560716914196,-35.95355356108532,31.774417169141962,-36.46588856108532,32.82595716914196C-36.88846856108532,33.69328216914196,-37.10266356108532,35.73029216914196,-36.85129356108532,36.473992169141965C-36.67975356108532,36.98150716914196,-35.83769856108532,37.571947169141964,-35.287008561085315,37.57194216914196C-35.03977856108532,37.57194216914196,-34.217433561085315,38.55152216914196,-34.23508356108532,38.82484716914196C-34.256678561085316,39.159387169141965,-35.30179856108531,40.023192169141964,-35.96259356108531,40.25041216914197C-36.37792356108532,40.393227169141966,-36.860293561085314,40.644122169141966,-37.03265356108532,40.80824216914196C-37.20501856108532,40.97236216914196,-37.590353561085315,41.30810716914196,-37.88960856108532,41.55201716914196C-38.18886356108531,41.79592216914196,-38.43370856108532,42.07352716914196,-38.43370856108532,42.17182716914196C-38.43370856108532,42.27012716914196,-38.556553561085316,42.503987169141965,-38.70575856108532,42.68981216914196C-38.85496356108531,42.87563716914196,-39.027718561085315,43.249417169141964,-39.08662856108532,43.52212716914196C-39.145533561085315,43.79484716914196,-39.30919856108532,44.209232169141956,-39.453893561085316,44.44299216914196C-39.60891856108532,44.69343716914196,-39.77997356108532,45.39172216914196,-39.866498561085315,46.143042169141964C-39.94725856108532,46.84431716914196,-40.11326356108532,47.65523216914196,-40.238298561085315,47.94492216914196C-40.97339356108532,49.64804216914196,-39.91763356108532,51.65895716914196,-38.070968561085316,52.066667169141965C-37.26937356108532,52.243647169141965,-37.19922356108532,52.288547169141964,-37.15960356108532,52.67319716914196C-37.12357856108532,53.022967169141964,-37.18451856108532,53.11420716914196,-37.54953856108532,53.24873716914196C-38.048493561085316,53.43263216914196,-38.577998561085316,54.19120716914196,-38.57879356108532,54.723002169141964C-38.579093561085315,54.92239216914196,-38.67853356108532,55.209277169141956,-38.796433561085315,55.36052716914196C-38.968933561085315,55.58182216914196,-38.988718561085314,55.925502169141964,-38.91432356108532,57.12256216914196C-38.863473561085314,57.94071216914196,-38.73685856108531,58.81691716914196,-38.62866856108532,59.07054216914196C-38.38656356108532,59.63810216914196,-37.36767856108532,60.38099716914196,-36.833143561085315,60.38099716914196C-36.61548356108532,60.38099716914196,-36.378853561085315,60.46068716914196,-36.30264356108532,60.55808716914196C-35.74236356108532,61.27419216914196,-35.41387356108532,67.89834716914197,-35.876433561085314,69.16460716914196C-36.02810856108532,69.57982216914198,-36.110833561085315,70.28113216914197,-36.11220856108532,71.17014716914196C-36.11220856108532,71.17014716914196,-36.11220856108532,72.53373216914196,-36.11220856108532,72.53373216914196C-36.11220856108532,72.53373216914196,-35.459288561085316,73.30848716914196,-35.459288561085316,73.30848716914196C-34.898558561085316,73.97354216914196,-34.806368561085314,74.17480716914196,-34.806368561085314,74.72520716914195C-34.806368561085314,75.90787216914197,-34.944738561085316,76.21832716914196,-35.71773356108532,76.81929216914196C-36.17237856108532,77.17274716914196,-36.593378561085316,77.38153216914196,-36.84673856108532,77.38154216914197C-37.48232856108532,77.38154216914197,-37.700823561085315,77.52068716914195,-38.007483561085316,78.10760216914196C-38.306523561085314,78.67995216914196,-38.43760856108531,78.73843716914195,-39.64431356108531,78.84695216914196C-40.57983856108531,78.93108216914196,-41.190463561085316,79.47463216914196,-41.190463561085316,80.22382216914195C-41.190463561085316,80.78867216914196,-41.00234856108531,81.01373716914196,-40.365248561085316,81.21109716914195C-40.140693561085314,81.28066216914195,-39.50013356108531,81.31151716914195,-38.94152356108531,81.27749716914195C-37.957428561085315,81.21759716914195,-35.31578356108531,81.19312216914196,-28.059543561085313,81.18010716914196C-21.48673856108531,81.16832716914195,-16.259288561085313,80.97872216914195,-15.966943561085314,80.74181216914195C-15.709623561085314,80.53329216914196,-15.828798561085314,79.42014216914197,-16.139243561085316,79.11701716914196C-16.285688561085315,78.97402716914196,-16.742558561085314,78.87441216914196,-17.463218561085313,78.82924216914196C-18.069043561085316,78.79127716914195,-18.608323561085314,78.69048716914196,-18.664768561085314,78.60346716914196C-18.721213561085314,78.51642216914195,-18.778453561085314,78.15719216914195,-18.787193561085314,77.80656216914196C-18.79592856108531,77.45592216914196,-18.910528561085314,76.96297216914195,-19.045638561085312,76.70860716914196C-19.304483561085313,76.22131716914195,-19.564443561085312,75.02599716914196,-19.943398561085314,72.56471716914196C-20.149958561085313,71.22317216914195,-20.41989856108531,70.43222716914195,-21.104143561085316,69.16460716914196C-21.903213561085316,67.68426716914196,-22.186358561085314,66.97992216914196,-22.31929856108531,66.16737716914196C-22.403408561085314,65.65327216914196,-22.577658561085315,64.98999216914196,-22.704698561085316,64.69311716914196C-22.849163561085312,64.35553216914195,-22.962063561085316,63.539482169141955,-23.008488561085315,62.514927169141956C-23.060873561085312,61.358767169141956,-23.162073561085315,60.710102169141955,-23.34855356108531,60.310162169141954C-24.06101356108531,58.78209716914195,-24.084973561085313,58.68527216914195,-23.86997856108531,58.06113716914196C-23.651443561085316,57.42673716914196,-23.769658561085315,56.320217169141955,-24.146563561085316,55.493342169141954C-24.473653561085314,54.77576716914196,-24.536293561085316,54.431967169141956,-24.57731356108531,53.16905216914195C-24.599068561085314,52.49913716914195,-24.65290856108531,51.18654216914195,-24.695198561085313,50.251512169141954C-24.737493561085312,49.31648216914195,-24.737238561085313,48.40801716914196,-24.695198561085313,48.23269716914196C-24.617953561085315,47.910562169141954,-24.164808561085312,47.793127169141954,-24.001473561085312,48.05118216914195C-23.84114356108531,48.30448216914195,-22.693053561085314,48.98553216914195,-21.98830856108531,49.24653216914196C-21.39934856108531,49.46465216914196,-21.192323561085313,49.482917169141956,-20.732348561085313,49.348357169141956C-19.990718561085313,49.131397169141955,-19.337573561085314,48.38145716914195,-19.21793856108531,47.60845716914196C-19.16571356108531,47.27099716914196,-19.018568561085313,46.540667169141955,-18.891478561085314,45.98809216914196C-18.669658561085313,45.023682169141956,-18.671323561085313,44.94561216914195,-18.964023561085313,44.004697169141956C-19.176788561085313,43.32072716914196,-19.278783561085312,42.58722216914195,-19.295013561085312,41.57857716914195C-19.31634356108531,40.25325716914195,-19.284868561085315,40.082107169141956,-18.936818561085314,39.502207169141954C-18.728028561085313,39.154342169141955,-18.555948561085312,38.651882169141956,-18.555948561085312,38.386542169141954C-18.555948561085312,38.121207169141954,-18.510483561085312,37.85515216914195,-18.45166356108531,37.797722169141956C-18.392843561085314,37.74029216914195,-18.270573561085314,37.262282169141955,-18.179608561085313,36.73518716914195C-17.976968561085314,35.56088716914195,-17.556893561085314,34.923767169141954,-15.413773561085314,32.52489716914195C-15.056078561085313,32.12451716914195,-14.657388561085313,31.646377169141953,-14.529613561085313,31.462362169141954C-14.401843561085313,31.278352169141954,-14.106208561085314,30.909197169141954,-13.872163561085314,30.643327169141955C-13.506843561085313,30.228352169141953,-13.458138561085313,30.072667169141955,-13.518498561085313,29.549802169141955C-13.580748561085313,29.010557169141954,-13.529983561085313,28.882787169141956,-13.096823561085314,28.407577169141955C-12.515293561085313,27.769602169141955,-12.481008561085313,27.425287169141953,-12.969863561085313,27.207797169141955C-13.138318561085313,27.132852169141955,-13.298558561085313,27.096137169141954,-13.455023561085314,27.097117169141953C-13.455023561085314,27.097117169141953,-13.455033561085324,27.09712216914196,-13.455033561085324,27.09712216914196M-29.301913561085325,60.49167716914196C-29.217703561085322,60.48122216914196,-29.116598561085326,60.811982169141956,-29.007193561085323,61.48337216914196C-28.909088561085326,62.08542216914196,-28.705723561085325,62.77666716914196,-28.553778561085323,63.01961716914196C-28.401833561085326,63.262577169141956,-28.277193561085326,63.57583716914196,-28.277193561085326,63.71468716914196C-28.277193561085326,63.85355216914196,-28.121353561085325,64.29129216914197,-27.928063561085324,64.68868716914196C-27.517183561085325,65.53340716914195,-26.68116856108532,68.06327716914195,-26.68116856108532,68.46510716914196C-26.68116856108532,68.61737216914196,-26.550583561085325,68.98009716914196,-26.390983561085324,69.27086216914196C-26.23137856108532,69.56161716914195,-26.100798561085327,69.90126216914196,-26.100798561085327,70.02791216914196C-26.100798561085327,70.15456216914195,-25.937568561085325,70.49348716914196,-25.738063561085326,70.78054216914197C-25.538558561085324,71.06759216914196,-25.375333561085327,71.35431216914196,-25.375333561085327,71.41362716914196C-25.375333561085327,71.47295216914196,-25.212108561085323,71.73398716914195,-25.012598561085326,71.99802216914196C-24.813098561085326,72.26206216914196,-24.649868561085327,72.59182716914196,-24.649868561085327,72.72851216914196C-24.649868561085327,72.86520216914197,-24.490978561085328,73.14311716914196,-24.296208561085326,73.34832216914197C-24.101433561085326,73.55353216914196,-23.632143561085325,74.33932716914197,-23.253348561085325,75.09265216914196C-22.611243561085324,76.36963216914197,-22.563553561085328,76.53735216914197,-22.55509356108533,77.59404216914197C-22.55509356108533,77.59404216914197,-22.546023561085327,78.72739716914197,-22.546023561085327,78.72739716914197C-22.546023561085327,78.72739716914197,-26.635833561085327,78.76725216914197,-26.635833561085327,78.76725216914197C-29.62520356108533,78.79474716914197,-30.753638561085324,78.75940216914196,-30.829933561085326,78.63885716914197C-30.887328561085326,78.54818216914197,-30.96335856108533,77.56102216914198,-31.002233561085326,76.44296716914198C-31.072373561085328,74.42559716914198,-31.07371856108533,74.40587216914197,-30.69390856108533,73.87073216914197C-30.227628561085325,73.21376716914197,-30.208398561085325,72.71154716914197,-30.598688561085325,71.07716216914197C-30.905708561085326,69.79150216914198,-30.959613561085327,68.28332216914197,-30.739248561085326,67.11036716914197C-30.66605856108533,66.72078216914198,-30.532503561085328,65.89199216914197,-30.444528561085328,65.26863716914198C-30.356548561085326,64.64529216914198,-30.118408561085324,63.599287169141974,-29.914033561085326,62.94435216914197C-29.709653561085325,62.28942216914197,-29.51350356108533,61.47837216914197,-29.47421856108533,61.13804216914197C-29.425533561085327,60.71626216914197,-29.36741856108533,60.499802169141965,-29.30191856108533,60.49167216914197C-29.30191856108533,60.49167216914197,-29.301913561085325,60.49167716914196,-29.301913561085325,60.49167716914196z';
    //"m0,0 c-0.93879,0.00588 -1.78559,0.70491 -2.64795,2.15163c-0.59895,1.00482 -2.47592,3.156 -4.50695,5.16214c-1.91523,1.89176 -4.09769,4.10426 -4.84248,4.92308c-3.32336,3.65369 -6.30358,6.60215 -7.74435,7.65025c-2.2734,1.65381 -3.84934,3.22142 -4.42533,4.40952c-0.27817,0.57378 -0.75726,1.35009 -1.061,1.71776l-0.55316,0.66408l-0.60758,-1.00055c-0.3348,-0.55407 -1.13758,-1.33552 -1.78646,-1.73547c-0.64887,-0.39995 -1.18191,-0.82365 -1.18795,-0.93857c-0.00605,-0.11492 -0.59367,-0.6595 -1.30584,-1.20421l-1.29677,-0.98284l0,-2.16048c0,-1.74717 0.10959,-2.27684 0.58038,-2.80686c0.38121,-0.42918 0.58037,-1.05437 0.58037,-1.83287c0,-1.64378 -1.47166,-3.40299 -4.48882,-5.38351c-2.83591,-1.86154 -4.00429,-2.01054 -6.91006,-0.84117c-2.00045,0.80504 -2.79309,1.56266 -3.81776,3.66574c-0.84516,1.73465 -1.27355,5.80867 -0.77081,7.29607c0.34308,1.01503 2.02719,2.19591 3.12857,2.1959c0.49446,0 2.13915,1.95916 2.10385,2.50581c-0.04319,0.66908 -2.13343,2.39669 -3.45502,2.85113c-0.83066,0.28563 -1.7954,0.78742 -2.14012,1.11566c-0.34473,0.32824 -1.1154,0.99973 -1.71391,1.48755c-0.59851,0.48781 -1.0882,1.04302 -1.0882,1.23962c0,0.1966 -0.24569,0.66432 -0.5441,1.03597c-0.29841,0.37165 -0.64392,1.11921 -0.76174,1.66463c-0.11781,0.54544 -0.44514,1.37421 -0.73453,1.84173c-0.31005,0.50089 -0.65216,1.89746 -0.82521,3.4001c-0.16152,1.40255 -0.49353,3.02438 -0.7436,3.60376c-1.47019,3.40624 0.64133,7.42807 4.33466,8.24349c1.60319,0.35396 1.74349,0.44376 1.82273,1.21306c0.07205,0.69954 -0.04983,0.88202 -0.77987,1.15108c-0.99791,0.36779 -2.05692,1.88494 -2.05851,2.94853c-0.0006,0.39878 -0.19948,0.97255 -0.43528,1.27505c-0.345,0.44259 -0.38457,1.12995 -0.23578,3.52407c0.1017,1.6363 0.35493,3.38871 0.57131,3.89596c0.48421,1.13512 2.52198,2.62091 3.59105,2.62091c0.43532,0 0.90858,0.15938 1.061,0.35418c1.12056,1.43221 1.77754,14.68052 0.85242,17.21304c-0.30335,0.83043 -0.4688,2.23305 -0.47155,4.01108l0,2.72717l1.30584,1.54951c1.12146,1.33011 1.30584,1.73264 1.30584,2.83344c0,2.36533 -0.27674,2.98624 -1.82273,4.18817c-0.90929,0.70691 -1.75129,1.12448 -2.25801,1.1245c-1.27118,0 -1.70817,0.27829 -2.32149,1.45212c-0.59808,1.1447 -0.86025,1.26167 -3.27366,1.4787c-1.87105,0.16826 -3.0923,1.25536 -3.0923,2.75374c0,1.1297 0.37623,1.57983 1.65043,1.97455c0.44911,0.13913 1.73023,0.20084 2.84745,0.1328c1.96819,-0.1198 7.25148,-0.16875 21.76396,-0.19478c13.14561,-0.02356 23.60051,-0.40277 24.1852,-0.87659c0.51464,-0.41704 0.27629,-2.64334 -0.3446,-3.24959c-0.29289,-0.28598 -1.20663,-0.48521 -2.64795,-0.57555c-1.21165,-0.07593 -2.29021,-0.27751 -2.4031,-0.45155c-0.11289,-0.17409 -0.22737,-0.89255 -0.24485,-1.59381c-0.01747,-0.70128 -0.24667,-1.68718 -0.51689,-2.19591c-0.51769,-0.97458 -1.03761,-3.36522 -1.79552,-8.28778c-0.41312,-2.68309 -0.953,-4.26498 -2.32149,-6.80022c-1.59814,-2.96068 -2.16443,-4.36937 -2.43031,-5.99446c-0.16822,-1.02821 -0.51672,-2.35477 -0.7708,-2.94852c-0.28893,-0.67517 -0.51473,-2.30727 -0.60758,-4.35638c-0.10477,-2.31232 -0.30717,-3.60965 -0.68013,-4.40953c-1.42492,-3.05613 -1.47284,-3.24978 -1.04285,-4.49805c0.43707,-1.2688 0.20064,-3.48184 -0.55317,-5.13559c-0.65418,-1.43515 -0.77946,-2.12275 -0.8615,-4.64858c-0.04351,-1.33983 -0.15119,-3.96502 -0.23577,-5.83508c-0.08459,-1.87006 -0.08408,-3.68699 0,-4.03763c0.15449,-0.64427 1.06078,-0.87914 1.38745,-0.36303c0.32066,0.5066 2.61684,1.8687 4.02633,2.3907c1.17792,0.43624 1.59197,0.47277 2.51192,0.20365c1.48326,-0.43392 2.78955,-1.9338 3.02882,-3.4798c0.10445,-0.67492 0.39874,-2.13558 0.65292,-3.24073c0.44364,-1.92882 0.44031,-2.08496 -0.14509,-3.96679c-0.42553,-1.36794 -0.62952,-2.83495 -0.66198,-4.85224c-0.04266,-2.65064 0.02029,-2.99294 0.71639,-4.15274c0.41758,-0.69573 0.76174,-1.70065 0.76174,-2.23133c0,-0.53067 0.09093,-1.06278 0.20857,-1.17764c0.11764,-0.11486 0.36218,-1.07088 0.54411,-2.12507c0.40528,-2.3486 1.24543,-3.62284 5.53167,-8.42058c0.71539,-0.80076 1.51277,-1.75704 1.76832,-2.12507c0.25554,-0.36802 0.84681,-1.10633 1.3149,-1.63807c0.73064,-0.82995 0.82805,-1.14132 0.70733,-2.18705c-0.1245,-1.07849 -0.02297,-1.33403 0.84335,-2.28445c1.16306,-1.27595 1.23163,-1.96458 0.25392,-2.39956c-0.33691,-0.14989 -0.65739,-0.22332 -0.97032,-0.22136zm-31.69376,66.78911c0.16842,-0.02091 0.37063,0.64061 0.58944,1.98339c0.19621,1.2041 0.60294,2.58659 0.90683,3.07249c0.30389,0.48592 0.55317,1.11244 0.55317,1.39014c0,0.27773 0.31168,1.15321 0.69826,1.948c0.82176,1.68944 2.49379,6.74918 2.49379,7.55284c0,0.30453 0.26117,1.02998 0.58037,1.61151c0.31921,0.58151 0.58037,1.2608 0.58037,1.5141c0,0.2533 0.32646,0.93115 0.72547,1.50526c0.39901,0.5741 0.72546,1.14754 0.72546,1.26617c0,0.11865 0.32645,0.64072 0.72547,1.16879c0.399,0.52808 0.72546,1.18761 0.72546,1.46098c0,0.27338 0.31778,0.82921 0.70732,1.23962c0.38955,0.41042 1.32813,1.98201 2.08572,3.48866c1.28421,2.55396 1.37959,2.8894 1.39651,5.00278l0.01814,2.26671l-8.17962,0.07971c-5.97874,0.05499 -8.23561,-0.0157 -8.3882,-0.25679c-0.11479,-0.18135 -0.26685,-2.15567 -0.3446,-4.39178c-0.14028,-4.03474 -0.14297,-4.07419 0.61665,-5.14447c0.93256,-1.31393 0.97102,-2.31837 0.19044,-5.58714c-0.61404,-2.57132 -0.72185,-5.58768 -0.28112,-7.93359c0.14638,-0.77917 0.41349,-2.43675 0.58944,-3.68346c0.17596,-1.24669 0.65224,-3.3387 1.06099,-4.64857c0.40876,-1.30986 0.80106,-2.93196 0.87963,-3.61262c0.09737,-0.84356 0.2136,-1.27648 0.3446,-1.29274z";
  }
  else{
    ps = myPath;
  }
  this.unit_type = 'Infantry';
  Unit.call(this, ps, myPaper, myOwner);
}
Infantry.prototype = Object.create(Unit.prototype)
Infantry.prototype.constructor = Infantry;

//artillery types of units
function Artillery(myPath, myPaper, myOwner){
  //provide a default element for infantry
  var ps;
  if (myPath === null){
    ps = "m 0,0 c -2.064,-8.634 -5.132,-16.77 -9.01,-24.526 21.773,-7.76 37.604,-27.656 39.481,-51.62 46.739,0.719 83.029,-24.403 99.359,-52.652 2.941,0.938 6.132,1.845 9.449,1.845 16.392,0 29.721,-13.265 29.721,-29.659 0,-16.486 -13.329,-29.721 -29.721,-29.721 -0.126,0 -0.313,0.064 -0.439,0.064 -4.13,-43.393 -24.527,-99.955 -87.534,-99.456 l -677.942,5.132 c -2.314,-15.112 -11.699,-26.779 -23.964,-27.812 -13.639997,-1.097 -25.965997,11.136 -29.468997,28.187 h -0.563 l -0.501,6.039 c 0,0.062 0,0.062 0,0.062 l -4.569,56.562 -6.693,82.718 0,0 c -1.314,19.928 9.511,36.979 24.527,38.199 15.015997,1.22 28.467997,-13.86 30.344997,-33.727 l 282,22.963 c -4.003,8.009 -6.505,16.957 -6.505,26.592 0,33.131 26.903,60.037 60.066,60.037 h 73.143 c -6.819,15.142 -10.887,31.973 -10.887,49.681 0,67.261 54.497,121.76 121.698,121.76 48.928,0 90.726,-28.908 110.185,-70.454 l 155.11,63.134 c 19.646,8.071 42.297,-1.439 50.307,-21.212 8.072,-19.773 -1.501,-42.297 -21.15,-50.368 z m -294.45,-11.763 c -17.145,0 -31.034,-13.891 -31.034,-31.097 0,-17.145 13.89,-31.034 31.034,-31.034 17.269,0 31.097,13.89 31.097,31.034 -0.001,17.207 -13.829,31.097 -31.097,31.097 z";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Artillery';
  Unit.call(this, ps, myPaper, myOwner);
}
Artillery.prototype = Object.create(Unit.prototype)
Artillery.prototype.constructor = Artillery;


function Carrier(myPath, myPaper, myOwner){
  //provide a default element for carrier
  var ps;
  if (myPath === null){
    ps = "M 3.25,50.00 C 3.25,50.00 94.00,49.25 94.00,49.25 94.00,49.25 96.00,46.50 96.00,46.50 96.00,46.50 96.75,44.25 96.75,44.25 96.75,44.25 94.00,43.75 94.00,43.75 94.00,43.75 93.25,41.75 93.25,41.50 93.25,41.25 53.25,41.25 53.25,41.25 53.25,41.25 53.50,33.75 53.50,33.75 53.50,33.75 53.25,27.25 53.25,27.25 53.25,27.25 52.25,27.50 52.25,27.50 52.25,27.50 52.50,34.00 52.50,34.00 52.50,34.00 46.00,33.75 45.75,33.75 45.50,33.75 44.25,35.50 44.25,35.50 44.25,35.50 38.00,36.00 38.00,36.00 38.00,36.00 37.75,38.25 37.75,38.25 37.75,38.25 37.00,40.75 37.00,40.75 37.00,40.75 4.00,41.00 4.00,41.00 4.00,41.00 3.75,43.75 3.75,43.50 3.75,43.25 7.25,43.00 7.25,43.00 7.25,43.00 7.75,45.00 7.75,45.00 7.75,45.00 3.75,45.50 3.50,45.50 3.25,45.50 3.25,50.00 3.25,50.00";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Carrier';
  Unit.call(this, ps, myPaper, myOwner);
}
Carrier.prototype = Object.create(Unit.prototype)
Carrier.prototype.constructor = Carrier;

function Cruiser(myPath, myPaper, myOwner){
  //provide a default element for cruiser
  var ps;
  if (myPath === null){
    ps = "M 10.00,49.00 C 10.00,49.00 88.50,48.75 88.50,48.75 88.50,48.75 89.75,45.88 89.75,45.88 89.75,45.88 89.75,44.12 89.75,44.12 89.75,44.12 78.50,44.00 78.50,44.00 78.50,44.00 78.00,43.25 78.00,43.25 78.00,43.25 80.25,43.25 80.25,43.25 80.25,43.25 73.12,43.12 73.12,43.12 73.12,43.12 74.00,44.38 74.00,44.38 74.00,44.38 71.75,44.50 71.75,44.50 71.75,44.50 71.62,42.12 71.62,42.12 71.62,42.12 70.62,40.88 70.62,40.88 70.62,40.88 69.88,42.00 69.88,42.00 69.88,42.00 69.88,43.88 69.88,43.88 69.88,43.88 68.50,43.88 68.50,43.88 68.50,43.88 67.75,41.25 67.75,41.25 67.75,41.25 65.12,40.88 65.12,40.88 65.12,40.88 64.88,38.88 64.88,38.88 64.88,38.88 63.88,38.88 63.88,38.88 63.88,38.88 63.62,38.12 63.62,38.12 63.62,38.12 61.25,38.12 61.25,38.12 61.25,38.12 61.25,42.38 61.25,42.38 61.25,42.38 60.00,42.88 60.00,42.88 60.00,42.88 60.00,28.50 60.00,28.50 60.00,28.50 58.75,28.38 58.75,28.38 58.75,28.38 58.88,43.12 58.88,43.12 58.88,43.12 57.00,43.00 57.00,43.00 57.00,43.00 56.88,38.50 56.88,38.75 56.88,39.00 54.00,39.12 54.00,39.12 54.00,39.12 53.88,43.25 53.88,43.25 53.88,43.25 50.75,43.12 50.75,43.12 50.75,43.12 44.50,40.00 44.50,40.00 44.50,40.00 44.38,40.75 44.12,40.88 43.88,41.00 46.62,42.50 46.62,42.50 46.62,42.50 45.62,44.12 45.62,44.25 45.62,44.38 43.88,44.50 43.88,44.50 43.88,44.50 42.75,43.50 42.75,43.50 42.75,43.50 43.00,38.88 43.00,38.88 43.00,38.88 40.00,38.88 40.12,38.88 40.25,38.88 40.62,43.38 40.62,43.38 40.62,43.38 38.00,43.00 38.00,43.00 38.00,43.00 38.00,42.00 38.00,42.00 38.00,42.00 36.62,41.88 36.62,41.88 36.62,41.88 36.75,43.62 36.75,43.62 36.75,43.62 34.00,43.62 34.00,43.62 34.00,43.62 34.12,37.62 34.12,37.62 34.12,37.62 34.88,37.75 34.88,37.75 34.88,37.75 34.62,31.00 34.62,31.00 34.62,31.00 33.75,31.00 33.75,31.00 33.75,31.00 33.88,37.00 33.88,37.00 33.88,37.00 33.00,37.38 33.00,37.38 33.00,37.38 33.00,41.25 33.00,41.25 33.00,41.25 31.25,42.00 31.25,42.00 31.25,42.00 31.12,44.50 31.12,44.50 31.12,44.50 29.75,44.50 29.62,44.62 29.50,44.75 29.88,43.12 29.88,43.12 29.88,43.12 25.25,43.12 25.25,43.12 25.25,43.12 26.25,45.00 26.25,45.00 26.25,45.00 25.88,46.00 25.88,46.00 25.88,46.00 25.00,45.75 25.00,45.75 25.00,45.75 24.75,44.12 24.75,44.12 24.75,44.12 20.12,44.38 20.12,44.38 20.12,44.38 22.25,44.50 22.25,44.50 22.25,44.50 22.12,45.88 22.12,45.88 22.12,45.88 16.88,45.88 16.88,45.88 16.88,45.88 15.62,44.25 15.62,44.25 15.62,44.25 14.50,44.12 14.50,44.12 14.50,44.12 14.12,45.62 14.12,45.62 14.12,45.62 10.00,45.62 10.00,45.62 10.00,45.62 9.88,49.00 9.88,49.00";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Cruiser';
  Unit.call(this, ps, myPaper, myOwner);
}
Cruiser.prototype = Object.create(Unit.prototype)
Cruiser.prototype.constructor = Cruiser;

function Transport(myPath, myPaper, myOwner){
  //provide a default element for transport
  var ps;
  if (myPath === null){
    ps = "M 13.00,47.50 C 13.00,47.50 59.62,47.88 59.62,47.88 59.62,47.88 61.00,39.75 61.00,39.75 61.00,39.75 53.00,39.75 53.00,39.75 53.00,39.75 49.75,32.25 49.75,32.25 49.75,32.25 44.00,32.25 44.00,32.25 44.00,32.25 45.75,23.50 45.75,23.50 45.75,23.50 40.25,23.50 40.25,23.50 40.25,23.50 38.75,32.00 38.75,32.00 38.75,32.00 31.00,32.00 31.00,32.00 31.00,32.00 34.00,22.75 34.00,22.75 34.00,22.75 27.75,22.50 27.75,22.50 27.75,22.50 24.50,32.50 24.50,32.50 24.50,32.50 16.00,32.75 16.00,32.75 16.00,32.75 12.25,37.50 12.25,37.50 12.25,37.50 1.50,37.25 1.50,37.25 1.50,37.25 13.25,47.50 13.25,47.50";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Transport';
  Unit.call(this, ps, myPaper, myOwner);
}
Transport.prototype = Object.create(Unit.prototype)
Transport.prototype.constructor = Transport;

function Battleship(myPath, myPaper, myOwner){
  //provide a default element for Battleship
  var ps;
  if (myPath === null){
    ps = "M 0.83,33.25 C 0.83,33.25 1.00,37.11 1.00,37.11 1.00,37.11 6.83,37.28 6.83,37.28 6.83,37.28 10.33,37.28 10.17,37.28 10.00,37.28 18.17,37.28 18.17,37.28 18.17,37.28 18.83,35.93 18.83,35.93 18.83,35.93 13.83,35.76 13.67,35.76 13.50,35.76 13.50,35.26 13.50,35.26 13.50,35.26 19.00,35.09 19.00,35.09 19.00,35.09 20.83,33.92 20.83,33.92 20.83,33.92 23.33,34.42 23.33,34.42 23.33,34.42 24.67,35.93 24.67,36.10 24.67,36.27 23.67,37.11 23.67,37.11 23.67,37.11 26.83,37.11 26.67,37.11 26.50,37.11 26.33,33.08 26.33,33.08 26.33,33.08 27.50,32.57 27.50,32.57 27.50,32.57 27.33,29.38 27.33,29.38 27.33,29.38 29.17,23.51 29.17,23.51 29.17,23.51 29.17,28.04 29.17,28.21 29.17,28.38 30.17,29.22 30.17,29.22 30.17,29.22 30.00,32.57 30.00,32.57 30.00,32.57 32.67,32.91 32.67,32.91 32.67,32.91 28.83,34.76 28.83,34.93 28.83,35.09 29.17,37.11 29.17,37.11 29.17,37.11 31.50,36.77 31.50,36.77 31.50,36.77 32.67,35.76 32.67,35.76 32.67,35.76 35.00,35.76 35.00,35.76 35.00,35.76 36.50,34.59 36.50,34.59 36.50,34.59 38.67,34.59 38.67,34.59 38.67,34.59 38.17,33.41 38.17,33.25 38.17,33.08 36.33,32.24 36.33,32.24 36.33,32.24 36.33,31.06 36.83,31.23 37.33,31.40 40.00,31.40 40.00,31.40 40.00,31.40 42.00,31.40 42.00,31.40 42.00,31.40 42.33,32.41 42.33,32.57 42.33,32.74 43.50,32.91 43.67,32.91 43.83,32.91 43.50,26.70 43.50,26.70 43.50,26.70 47.33,26.53 47.33,26.53 47.33,26.53 47.50,32.07 47.50,32.07 47.50,32.07 49.83,32.41 49.83,32.41 49.83,32.41 49.83,28.71 49.83,28.71 49.83,28.71 51.67,28.54 51.67,28.54 51.67,28.54 51.83,32.24 51.83,32.24 51.83,32.24 54.83,32.41 54.83,32.41 54.83,32.41 54.50,33.92 54.50,33.92 54.50,33.92 56.83,33.92 56.83,33.92 56.83,33.92 57.00,18.97 57.00,18.97 57.00,18.97 55.33,18.97 55.33,18.97 55.33,18.97 56.33,3.86 56.33,3.86 56.33,3.86 57.17,12.93 57.17,12.93 57.17,12.93 59.17,16.12 59.17,16.12 59.17,16.12 57.00,16.29 57.00,16.29 57.00,16.29 59.83,17.29 59.83,17.29 59.83,17.29 59.33,20.65 59.33,20.65 59.33,20.65 58.00,21.49 58.00,21.49 58.00,21.49 58.17,25.19 58.17,25.19 58.17,25.19 59.17,28.04 59.17,28.04 59.17,28.04 59.17,30.56 59.17,30.56 59.17,30.56 60.33,30.90 60.33,30.90 60.33,30.90 60.67,26.53 60.67,26.53 60.67,26.53 63.83,26.53 63.83,26.53 63.83,26.53 64.00,31.40 64.00,31.40 64.00,31.40 65.67,31.40 65.67,31.40 65.67,31.40 65.50,27.20 65.50,27.20 65.50,27.20 68.33,27.20 68.50,27.20 68.67,27.20 68.50,35.93 68.50,35.93 68.50,35.93 69.50,35.93 69.50,35.93 69.50,35.93 70.33,33.75 70.33,33.58 70.33,33.41 73.50,33.25 73.50,33.25 73.50,33.25 74.33,34.42 74.33,34.42 74.33,34.42 78.50,34.25 78.67,34.25 78.83,34.25 80.00,34.25 80.00,34.25 80.00,34.25 74.50,34.59 74.50,34.59 74.50,34.59 74.67,35.93 74.67,35.93 74.67,35.93 82.33,35.60 82.33,35.60 82.33,35.60 97.67,35.09 97.67,35.09 97.67,35.09 98.17,30.90 98.17,30.90 98.17,30.90 98.67,39.12 98.67,39.12 98.67,39.12 99.17,43.49 99.17,43.49 99.17,43.49 98.17,44.16 98.17,44.16 98.17,44.16 10.33,44.33 10.33,44.33 10.33,44.33 10.33,42.31 10.33,42.31 10.33,42.31 5.00,41.81 5.00,41.81 5.00,41.81 4.83,44.16 4.83,44.16 4.83,44.16 3.00,44.33 3.00,44.33 3.00,44.33 2.67,41.81 2.67,41.81 2.67,41.81 0.50,41.81 0.50,41.81 0.50,41.81 0.50,37.28 0.50,37.28";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Battleship';
  Unit.call(this, ps, myPaper, myOwner);
}
Battleship.prototype = Object.create(Unit.prototype)
Battleship.prototype.constructor = Battleship;


function Submarine(myPath, myPaper, myOwner){
  //provide a default element for carrier
  var ps;
  if (myPath === null){
    ps = "m 0,0 c -0.39815,-1.19935 -1.38692,-14.89421 -2.19724,-30.43341 -0.81033,-15.54094 -1.83275,-28.61347 -2.27203,-29.05102 -0.4393,-0.43755 -9.0355,-1.73452 -19.10268,-2.87982 -10.06719,-1.14531 -19.07923,-2.19299 -20.026762,-2.32722 -0.947534,-0.13946 -4.139655,4.46268 -7.093602,10.21536 -2.953947,5.75267 -6.100974,10.29729 -6.99339,10.1003 -7.393159,-1.63864 -23.413019,-10.08984 -23.413019,-12.35256 0,-1.50093 1.685285,-7.9631 3.74508,-14.35903 l 3.745078,-11.62738 -7.144178,-15.44158 c -4.52745,-9.78653 -6.564575,-16.14062 -5.561748,-17.35043 2.947457,-3.55097 17.39172,-9.81616 21.339029,-9.25658 2.799602,0.39746 5.122697,3.15526 8.107566,9.62441 2.30099,4.98565 5.06504,9.40301 6.142333,9.81615 1.077292,0.41315 10.754963,-1.70488 21.505923,-4.70673 l 19.54722,-5.45981 -0.11002,-14.81751 c -0.0605,-8.14962 -1.10065,-23.05429 -2.31142,-33.12147 -1.21078,-10.06719 -1.99123,-18.57417 -1.73433,-18.90539 0.25689,-0.33121 9.34813,-1.29697 20.20277,-2.14592 10.85462,-0.84896 21.43996,-1.95068 23.52299,-2.4475 4.54155,-1.08604 5.49067,1.3266 11.82175,30.04466 4.65861,21.13324 6.77043,26.57562 10.3106,26.57562 3.40568,0 68.66843,-14.66235 109.18108,-24.52906 114.8196,-27.96324 160.37978,-36.04837 244.92459,-43.46235 94.8397,-8.31698 110.68743,-10.18921 109.62667,-12.95398 -0.78846,-2.05528 9.38194,-62.17598 10.74946,-63.54442 0.37021,-0.37131 4.81527,-1.61773 9.8779,-2.77 l 9.20481,-2.09712 0,-12.0475 c 0,-11.097439 0.30358,-12.091083 3.84746,-12.594878 3.41001,-0.48462 3.9801,0.453241 5.01426,8.248988 1.82135,13.72973 2.81782,14.41134 18.15843,12.41359 7.19084,-0.93786 14.32796,-1.72755 15.86029,-1.75718 2.4164,-0.0523 2.56457,-1.33881 1.11692,-9.74121 -0.918,-5.32907 -1.38725,-9.925982 -1.04278,-10.215359 0.34446,-0.289377 2.68339,-1.01805 5.19759,-1.619466 4.45855,-1.068603 4.60042,-0.836753 5.75209,9.341995 l 1.18078,10.43676 26.52498,0 c 22.53214,0 27.43931,0.48811 32.5991,3.2459 9.81089,5.24191 21.56457,24.82716 33.08516,55.12808 l 1.80165,4.73986 34.40425,-1.20632 c 92.61144,-3.24416 151.31542,11.4426 165.86522,41.49772 5.0548,10.44198 5.0628,30.26954 0.016,40.69409 -10.1944,21.06003 -47.36482,40.44132 -99.22751,51.74097 -32.16794,7.00781 -90.61068,15.71004 -129.87104,19.33772 -24.2487,2.24005 -73.90606,6.29656 -107.20898,8.75801 -19.65498,1.45212 -45.54203,3.41849 -57.52677,4.36681 -11.98475,0.95006 -38.65625,2.93909 -59.27001,4.42084 -20.61376,1.48175 -45.71635,3.42546 -55.78354,4.31974 -27.94436,2.48411 -139.55839,2.00995 -195.24237,-0.82978 -127.37583,-6.49704 -133.01079,-6.64522 -135.26434,-3.56317 -1.14298,1.56368 -3.01037,10.84815 -4.14972,20.63293 -4.0571,34.8403 -3.53826,33.26442 -11.41223,34.66249 -12.28336,2.17905 -39.21452,1.67525 -40.01972,-0.74784 z";
    }
  else{
    ps = myPath;
  }
  this.unit_type = 'Submarine';
  Unit.call(this, ps, myPaper, myOwner);
}
Submarine.prototype = Object.create(Unit.prototype)
Submarine.prototype.constructor = Submarine;

/************************ ZONES **********************************************************************/

//zone is an element on the page
function Zone(myPath, myPaper){
  //used for path tracking
  //this.zonenumber = myPaper.zonecount;

  //Raphael set objects for the collection of units
  this.ally_unit_set = {};
  this.russian_unit_set = {};
  this.axis_unit_set = {};
  this.neutral_unit_set = {};
  GameElement.call(this, myPath, myPaper);
}

Zone.prototype = new GameElement();
Zone.prototype.constructor = Zone;

//seazone is a type of zone
function SeaZone(myPath, myPaper){
  Zone.call(this, myPath, myPaper);
}
SeaZone.prototype = Object.create(Zone.prototype);
SeaZone.prototype.constructor = SeaZone;

SeaZone.prototype.drawElement = function (){var this_el = this.paper.path(this.pathstring).attr(
                                          {
                                            gradient: '90-#789CFF-#007BFF',
                                            stroke: '#3b4449',
                                            'stroke-width': 2,
                                            'stroke-linejoin': 'round'
                                  }
                            );
                            this_el.data("Zone", this);
                      };

//landzone is a type of zone
function LandZone(myPath, myPaper, defaultOwner){
  //set the zone owner to the
  this.original_owner = defaultOwner;
  this.current_owner = defaultOwner;
  this.zone_gradient;
  switch (defaultOwner){
    case 'de':
      this.zone_gradient = '90-#C7C7C7-#ADADAD';
    break;
    case 'uk':
      this.zone_gradient = '90-#E6E5BE-#C8D19D';
    break;
    case '':
      this.zone_gradient = '90-#FFA33B-#FF8800';
    break;
    case 'fr':
      this.zone_gradient = '90-#526c7a-#64a0c1';
    break;
    case 'it':
      this.zone_gradient = '90-#E3BB19-#EDD54E';
    break;
    case 'buffer':
      this.zone_gradient = '90-#FFCEBA-#FFEBE3';
    break;
    case 'ru':
      this.zone_gradient = '90-#632512-#A86C59';
    break;
  }
  Zone.call(this, myPath, myPaper);
}
LandZone.prototype = Object.create(Zone.prototype);
LandZone.prototype.constructor = LandZone;

LandZone.prototype.drawElement = function (){var this_el = this.paper.path(this.pathstring).attr(
                                          {
                                            gradient: this.zone_gradient,
                                            stroke: 'black',
                                            'stroke-width': 2,
                                            'stroke-linejoin': 'round'
                                  }
                            );
                            this_el.data("Zone", this);
                      };

/************************ UTILITIES & HANDLERS **********************************************************************/

function unitMouseupHandler(unit){
  //use the upper left corner of the element
  var b = unit.getBBox();

  var new_path = Raphael.transformPath(unit.attr('path'), 's.5');

//  unit.attr({path: new_path});

  unit.paper.zone_set.forEach(function (el) {
      el.attr({stroke:'black'});
  });
console.log(new_path.toString());
  for (var i = 0; i < unit.paper.zone_set.length; i++){
    var zone_element = unit.paper.zone_set[i];
    if (Raphael.isPointInsidePath(zone_element.attr('path'), (b.x + (b.width/2)), (b.y + b.height/2))){
      zone_element.attr({stroke: 'red'});
      /*console.log('UNIT' + unit);//el.data("Unit", this)
      console.log('UNIT OWNER: ' + unit.data("Unit").unit_owner);*/
      var country = unit.data("Unit").unit_owner;
      //set the units location to the zone it was dropped on
      unit.data("Unit").location_zone = zone_element.data("Zone");
      switch (country){
        case 'de':
            zone_element.data("Zone").axis_unit_set[unit.data("Unit").id] = unit;
        break;
        case 'uk':
            zone_element.data("Zone").ally_unit_set[unit.data("Unit").id] = unit;
        break;
        case 'fr':
            zone_element.data("Zone").ally_unit_set[unit.data("Unit").id] = unit;
        break;
        case 'it':
            zone_element.data("Zone").axis_unit_set[unit.data("Unit").id] = unit;
        break;
        case 'us':
            zone_element.data("Zone").ally_unit_set[unit.data("Unit").id] = unit;
        break;
        case 'ru':
            zone_element.data("Zone").russian_unit_set[unit.data("Unit").id] = unit;
        break;
      }
    }
  }
}

function unitMousedownHandler(unit){
  //pull it out of the existing unti_set
  var country = unit.data("Unit").unit_owner;
  var zone = unit.data("Unit").location_zone;
  switch (country){
    case 'de':
        delete zone.axis_unit_set[unit.data("Unit").id];
    break;
    case 'uk':
        delete zone.ally_unit_set[unit.data("Unit").id];
    break;
    case 'fr':
        delete zone.ally_unit_set[unit.data("Unit").id];
    break;
    case 'it':
        delete zone.axis_unit_set[unit.data("Unit").id];
    break;
    case 'us':
        delete zone.ally_unit_set[unit.data("Unit").id];
    break;
    case 'ru':
        delete zone.russian_unit_set[unit.data("Unit").id];
    break;
  }



//  var new_path = Raphael.transformPath(unit.attr('path'), 's2');
//  console.log(new_path.toString());
//  unit.attr({path: new_path});
}
